# Red Line

本插件會監控 LLM 的回應。

如果回應中包含設定的關鍵字，將對該使用者進行計數並進行軟性封禁。

## 功能

- **關鍵字監控**: 在 LLM 回應後檢查是否觸發了預設的關鍵字。
- **違規計數與攔截**: 當使用者觸發關鍵字的次數達到閾值後，後續的訊息將有機率被攔截，實現軟性封禁。
- **自動冷卻重置**: 使用者的違規計數會在一段時間後自動清零，解除限制。
- **高度可配置**: 可自訂關鍵字、觸發閾值、攔截機率和冷卻時間。

## 使用

1.  下載 Code 為 ZIP；
2.  插件管理 - 安裝插件，選擇下載的 ZIP。

## 說明

本插件透過監聽 `on_llm_response` 和 `on_user_message` 兩個事件，實現對使用者行為的監管。

1.  **回應監控 (`on_llm_response`)**: 在每次 LLM 生成回應後，插件會檢查回應內容是否包含您設定的關鍵字。如果包含，將為該使用者增加違規計數。

2.  **訊息攔截 (`on_user_message`)**: 在每次使用者傳送訊息時，插件會檢查其違規計數。如果計數超過閾值，將根據設定的機率決定是否攔截此訊息。被攔截的訊息不會傳遞給 LLM。

透過這種方式，插件可以有效地對觸發了特定紅線的對話進行管理，同時透過冷卻機制給予使用者改過的機會。

## 注意

本插件的攔截機制是機率性的，並非每次都會觸發。所有設定均可在插件設定頁面中即時調整。
